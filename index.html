<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafeSpace - Anti-Bullying Chat</title>
    <!-- 
      SafeSpace - A Proof of Concept for Safe Digital Communication 
      Features: Client-side bullying detection, multi-user simulation.
    -->
    <link rel="stylesheet" href="style.css">

    <!-- Importing friendly fonts for an 8th-grade audience -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600&family=Comic+Neue:wght@700&display=swap"
        rel="stylesheet">

    <!-- TensorFlow.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/toxicity"></script>
</head>

<body>

    <div class="container">
        <!-- HEADER -->
        <header>
            <h1>SafeSpace üõ°Ô∏è</h1>
            <p>Chat smart, stay safe.</p>
        </header>

        <!-- 
          SECTION 1: LOGIN
          shown by default. Hides when user logs in.
        -->
        <div id="login-section">
            <h2>Join the Chat</h2>
            <input type="text" id="username-input" placeholder="Enter your name..." maxlength="15">
            <button id="login-btn">Start Chatting</button>
            <p id="login-error" class="error-msg hidden">Please enter a name!</p>
        </div>

        <!-- 
          SECTION 2: CHAT INTERFACE
          Hidden by default. Shows after login.
        -->
        <div id="chat-section" class="hidden">
            <div class="chat-header">
                <h3>Chatting as: <span id="current-user-display">User</span></h3>
                <div class="controls">
                    <label style="font-size: 0.8rem; margin-right: 10px;">
                        <input type="checkbox" id="regex-toggle"> Use Wordbank
                    </label>
                    <button id="clear-btn" class="secondary-btn" style="margin-right: 5px;">Clear</button>
                    <button id="logout-btn" class="secondary-btn">Leave</button>
                </div>
            </div>

            <!-- The main area where messages appear -->
            <div id="chat-window">
                <!-- Messages will be injected here by app.js -->
            </div>

            <!-- Input Area -->
            <div id="input-area">
                <input type="text" id="message-input" placeholder="Type a message..." autocomplete="off">
                <button id="send-btn">Send</button>
            </div>

            <!-- 
              FEEDBACK CONTAINER
              This box slides up when a message is blocked.
              It explains WHY the message was blocked (Triggered Rule).
            -->
            <div id="validation-feedback" class="feedback-container hidden">
                <div class="feedback-header">
                    <span>‚ö†Ô∏è Message Blocked</span>
                </div>
                <div id="feedback-details" class="feedback-details">
                    <!-- Specific rules will be injected here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Main Logic Script -->
    <script src="app.js"></script>
</body>

</html>